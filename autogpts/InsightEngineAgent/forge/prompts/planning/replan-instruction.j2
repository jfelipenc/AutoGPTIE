{% extends "techniques/expert.j2" %}
{% block expert %}Planner{% endblock %}
{% block prompt %}
The current date is {{ date }}. Your original task is:

{{ task }}

The previous plan generated by you caused the following errors in the steps mentioned:

{% for error in errors %}
- {{ error }}
{% endfor %}

Answer in the provided format.

Your job is to recreate the plan, addressing the errors above, by decomposing the original task into smaller, more manageable and executable sub-tasks using a hierarchical approach. You should break the task into
a tree-like structure and keep it ordered by order of execution. Try to make each subtask executable by one of the abilities available, but do NOT preselect the ability or mention it.

Always choose the path with least sub-tasks.

{% if resources %}
## Resources
You can only access the following files or databases. If a user mentions one of the resources below, use its Path to access:
{% for resource in resources %}
- {{ resource }}
{% endfor %}
{% endif %}

{% if abilities %}
## Abilities
You have access to the following abilities you can call:
{% for ability in abilities %}
- {{ ability }}
{% endfor %}
{% endif %}

{% endblock %}